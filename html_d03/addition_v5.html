<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Math Quiz App with jQuery</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-3.6.4.min.js"
    integrity="sha256-oP6HI9z1XaZNBrJURtCoUT5SUnxFr8s3BzRl+cbzUq8=" crossorigin="anonymous"></script>
  <style></style>
</head>

<body>
  <h2 class="text-center">Math Quiz App with jQuery</h2>

  <div class="d-flex justify-content-center">
    <div class="rounded bg-light p-3 rounded" style="width: 950px; box-shadow: 0px 0px 15px #7e7c7c">
      <div class="text-success text-end">
        <div class="row">
          <div class="col-6">
            <h2 class="text-secondary">Set Number: <span id="set_number">0</span> / 5</h2>
          </div>
          <div class="col-6">
            <h4><span id="score">Score: 2</span> / <span id="out_count">0</span></h4>
          </div>
        </div>


        <br />


        <form action="" id="my_form">
          <div class="row">
            <div class="col-6">
              <h2 id="qestion0">Addition</h2>
            </div>
            <h2 id="ans0" class="col-2 d-none">Ans</h2>
            <div class="col">
              <input style="border-color: green; border-width: 3px" type="text" class="form-control text-success"
                placeholder="Enter Your Answer" id="answer0" />
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <h2 id="qestion1">Subtraction</h2>
            </div>
            <h2 id="ans1" class="col-2 d-none">Ans</h2>
            <div class="col">
              <input style="border-color: green; border-width: 3px" type="text" class="form-control text-success"
                placeholder="Enter Your Answer" id="answer1" />
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <h2 id="qestion2">Multiplication</h2>
            </div>
            <h2 id="ans2" class="col-2 d-none">Ans</h2>
            <div class="col">
              <input style="border-color: green; border-width: 3px" type="text" class="form-control text-success"
                placeholder="Enter Your Answer" id="answer2" />
            </div>
          </div>

          <div class="row">
            <div class="col-6">
              <h2 id="qestion3">Division</h2>
            </div>
            <h2 id="ans3" class="col-2 d-none">Ans</h2>
            <div class="col">
              <input style="border-color: green; border-width: 3px" type="text" class="form-control text-success"
                placeholder="Enter Your Answer" id="answer3" />
            </div>
          </div>



          <br><br>
          <div class="row p-3">
            <button type="button" class="btn btn-block btn-success col" id="submit_btn">
              Submit
            </button>
            <button type="button" class="btn btn-warning col d-none" id="next_btn" style="width:150px">
              Next
            </button>
            <button type="button" class="btn btn-danger " id="clear_btn" style="width:100px">
              x
            </button>
          </div>
        </form>

      </div>
    </div>

    <script>
      // get 2 random numbers
      let arr1 = [];
      let arr2 = [];
      let answers = [];

      let operators_array = ['+', '-', '*', '/'];

      for (let i = 0; i < 4; i++) {
        let num1 = Math.floor(Math.random() * 10 + 10);
        let num2 = Math.floor(Math.random() * 10 + 1);

        //special case for division question
        if (operators_array[i] === '/') {
          num1 = num1 * num2;
        }
        arr1.push(num1);
        arr2.push(num2);

        $("#qestion" + i).text(`What is ${num1} ${operators_array[i]} ${num2} ?`);

        let temp_question = num1 + operators_array[i] + num2;
        let answer = eval(temp_question);
        answers.push(answer);
        console.log(`${num1} ${operators_array[i]} ${num2} = ${answer}`);
      }

      // console.log('num1: ' + arr1);
      // console.log('oper: ' + operators_array);
      // console.log('num2: ' + arr2);
      // console.log('answ: ' + answers);


      //get score from cache (cookies)
      let score = Number(localStorage.getItem("score"));
      if (!score) {
        score = 0;
      }
      let count = Number(localStorage.getItem("count"));
      if (!count) {
        count = 0;
      }
      $("#set_number").text(count + 1);
      $("#out_count").text(count * 4);

      $("#score").text(`score : ${score}`);

      $("#submit_btn").click(function () {
        console.log("submit");

        for (let i = 0; i < operators_array.length; i++) {
          if (answers[i] === +$("#answer" + i).val()) {
            score++;
            $("#ans" + i).addClass('text-success');
            $("#ans" + i).text(`✅`);
          } else {
            // score--;
            $("#ans" + i).addClass('text-danger');
            $("#ans" + i).text(`${answers[i]} ❌`);
          }


          
          $("#ans" + i).removeClass('d-none');
          
        }
        updateScore(score);
        $("#score").text(`score : ${score}`);
        count++;
        localStorage.setItem("count", String(count));
        $("#out_count").text(count * 4);

        //hide submit button & show next button
        $("#submit_btn").addClass('d-none');
        $("#next_btn").removeClass('d-none');

        // window.location.reload();

      });


      $("#next_btn").click(function () {
        window.location.reload();
      });

      if (count >= 5) {
        //restart game after 5 sets
        updateScore(0);
        localStorage.setItem("count", String(0));
        window.location.reload();
      }

      function updateScore(score) {
        localStorage.setItem("score", String(score));
        console.log("updateScore: " + score);
      }

      $('#clear_btn').click(function () {
        updateScore(0);
        localStorage.setItem("count", String(0));
        window.location.reload();
      });
    </script>

    <br /><br /><br /><br /><br /><br />
    <img src="addition_ template.png" alt="" class="d-none" />
</body>

</html>