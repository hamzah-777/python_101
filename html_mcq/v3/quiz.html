<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quiz Game</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1 class="mt-4">Quiz Game</h1>
        <div id="questionDisplay" class="mt-4"></div>
        <div id="choicesDisplay" class="mt-3"></div>
        <button id="submitAnswerBtn" class="btn btn-primary mt-3">Submit Answer</button>
    </div>

    <!-- Footer -->
    <footer class="fixed-bottom bg-light text-center p-2">
        <p id="footerText" class="mb-0"></p>
    </footer>

    <!-- Bootstrap JS and Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.min.js"></script>
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
   
</body>
<script>
    const questions = [
    {
        question: 'What is the capital of France?',
        choices: ['Berlin', 'Madrid', 'Paris', 'Rome'],
        correctAnswer: 'Paris'
    },
    {
        question: 'Which planet is known as the Red Planet?',
        choices: ['Mars', 'Venus', 'Jupiter', 'Saturn'],
        correctAnswer: 'Mars'
    },
    {
        question: 'What is the largest mammal on Earth?',
        choices: ['Elephant', 'Blue Whale', 'Giraffe', 'Hippopotamus'],
        correctAnswer: 'Blue Whale'
    }
    // Add more questions as needed
];

let currentPlayer;
let currentQuestionIndex = 0;
let playerScores = {};

$(document).ready(function () {
    // Load current player and start the quiz
    currentPlayer = localStorage.getItem('currentPlayer');

    if (!currentPlayer || playerScores[currentPlayer]) {
        // Redirect to landing page if the player is not set or has already completed the quiz
        window.location.href = 'index.html';
    }

    updateFooter();
    displayQuestion();

    // Event listener for submitting answers
    $('#submitAnswerBtn').click(submitAnswer);
});

function displayQuestion() {
    const questionDisplay = $('#questionDisplay');
    const choicesDisplay = $('#choicesDisplay');

    const currentQuestion = questions[currentQuestionIndex];

    questionDisplay.text(currentQuestion.question);

    choicesDisplay.html(currentQuestion.choices.map(choice => {
        return `<label class="btn btn-outline-primary">
                    <input type="radio" name="answer" value="${choice}">
                    ${choice}
                </label><br>`;
    }).join(''));

    updateFooter();
}

function submitAnswer() {
    const selectedAnswer = $('input[name="answer"]:checked');

    if (!selectedAnswer.length) {
        alert('Please select an answer.');
        return;
    }

    const userAnswer = selectedAnswer.val();
    const currentQuestion = questions[currentQuestionIndex];

    if (!playerScores[currentPlayer]) {
        playerScores[currentPlayer] = { score: 0, completionTime: 0 };
    }

    if (userAnswer === currentQuestion.correctAnswer) {
        playerScores[currentPlayer].score++;
    }

    currentQuestionIndex++;

    if (currentQuestionIndex < questions.length) {
        displayQuestion();
    } else {
        // Save completion time and redirect to landing page
        playerScores[currentPlayer].completionTime = new Date().getTime();
        saveScores();
        alert(`Quiz completed! ${currentPlayer}, your score is ${playerScores[currentPlayer].score} out of ${questions.length}.`);
        localStorage.removeItem('currentPlayer'); // Clear currentPlayer after completing the quiz
        window.location.href = 'index.html';
    }
}

function saveScores() {
    localStorage.setItem('playerScores', JSON.stringify(playerScores));
}

function updateFooter() {
    const totalQuestions = questions.length;
    const currentQuestionNumber = currentQuestionIndex + 1;

    $('#footerText').text(`${currentPlayer} | Question ${currentQuestionNumber} of ${totalQuestions}`);
}


</script>
</html>
